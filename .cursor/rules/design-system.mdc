---
description: 设计系统参考文档 - 让 AI 根据设计系统输出前端代码
globs:
alwaysApply: true
---

# 设计系统参考文档

本文档旨在让 AI 在生成前端代码时遵循项目的设计系统规范。

## 一、UI 组件库使用规范

### 1. 组件导入方式

所有 UI 组件从 `@workspace/ui/components/*` 导入：

```typescript
// ✅ 正确：从 @workspace/ui 导入组件
import { Button } from '@workspace/ui/components/button';
import { Input } from '@workspace/ui/components/input';
import {
  Card,
  CardContent,
  CardHeader,
  CardTitle,
} from '@workspace/ui/components/card';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@workspace/ui/components/select';
import { Badge } from '@workspace/ui/components/badge';
import { Switch } from '@workspace/ui/components/switch';
import { Label } from '@workspace/ui/components/label';
import { Textarea } from '@workspace/ui/components/textarea';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@workspace/ui/components/table';

// ✅ 工具函数
import { cn } from '@workspace/ui/lib/utils';

// ✅ 弹窗组件（移动端和桌面端统一使用，详细用法见第六部分）
import { ResponsiveDialog } from '@workspace/ui/components/responsive-dialog';

// ✅ 分页组件（统一使用，详细用法见第六部分）
import { DataPagination } from '@/components/DataPagination';
// 或
import { DataPagination } from '@jiantie/components/DataPagination';

// ❌ 错误：不要使用 Dialog，应使用 ResponsiveDialog
// ❌ 错误：不要使用其他分页组件或自定义分页实现，应使用 DataPagination
```

### 2. 图标使用规范

**优先使用 `lucide-react`**，不要使用 `@workspace/ui/components/Icon` 组件：

```typescript
// ✅ 正确：使用 lucide-react
import {
  Plus,
  Search,
  Trash2,
  Edit,
  Check,
  ChevronDown,
  X,
} from 'lucide-react';

// ❌ 错误：不要使用 Icon 组件
import { Icon } from '@workspace/ui/components/Icon';
```

### 3. 组件变体规范

#### Button 组件

```typescript
// Variant 变体：
// - default: 默认样式（bg-primary text-primary-btn）
// - destructive: 危险操作（bg-destructive text-destructive-foreground）
// - outline: 轮廓样式（border border-input bg-background）
// - secondary: 次要样式（bg-secondary text-secondary-foreground）
// - ghost: 幽灵样式（hover:bg-accent hover:text-accent-foreground）
// - link: 链接样式（text-primary underline）
// - black: 黑色样式（bg-gray-900 text-white）

// Size 尺寸：
// - xs: h-6 px-3 text-xs
// - sm: h-8 px-3
// - default: h-10 px-4 py-2
// - lg: h-12 px-8 text-base
// - icon: h-10 w-10

// 使用示例
<Button variant="default" size="lg">提交</Button>
<Button variant="outline" size="sm">取消</Button>
<Button variant="destructive" size="default">删除</Button>
<Button variant="ghost" size="icon">
  <Plus className="h-4 w-4" />
</Button>
```

#### Input 组件

```typescript
// VariantSize 尺寸：
// - xs: h-6 py-1 text-xs
// - sm: h-8 py-1 text-sm
// - default: h-10
// - lg: h-12

// 使用示例
<Input variantSize="default" placeholder="请输入..." />
<Input variantSize="sm" type="email" />
<Input variantSize="lg" disabled />
```

#### Badge 组件

```typescript
// Variant 变体：
// - default: 默认（bg-primary text-primary-foreground）
// - secondary: 次要（bg-secondary text-secondary-foreground）
// - destructive: 危险（bg-destructive text-destructive-foreground）
// - outline: 轮廓（text-foreground）
// - success: 成功（bg-green-100 text-green-800）
// - warning: 警告（bg-yellow-100 text-yellow-800）
// - danger: 危险（bg-red-100 text-red-800）
// - info: 信息（bg-blue-100 text-blue-800）

// 使用示例
<Badge variant="default">新</Badge>
<Badge variant="success">已完成</Badge>
<Badge variant="warning">待处理</Badge>
```

## 二、设计 Token 系统

### 1. 颜色系统（CSS 变量）

所有颜色通过 CSS 变量定义，使用 HSL 格式：

```typescript
// ✅ 正确：使用设计 Token
className = 'bg-primary text-primary-btn';
className = 'bg-secondary text-secondary-foreground';
className = 'bg-destructive text-destructive-foreground';
className = 'bg-accent text-accent-foreground';
className = 'bg-muted text-muted-foreground';
className = 'border-border';
className = 'bg-background text-foreground';

// ❌ 错误：直接写色值（除非是特殊场景）
className = 'bg-[#3b82f6] text-white';
```

**主要颜色 Token：**

- **Primary（主色）**：
  - `bg-primary` / `text-primary` - 主色背景/文字
  - `text-primary-btn` - 按钮文字色（与 primary 背景搭配）
  - `text-primary-foreground` - 主色前景文字

- **Secondary（次要色）**：
  - `bg-secondary` / `text-secondary-foreground`

- **Destructive（危险色）**：
  - `bg-destructive` / `text-destructive-foreground`

- **Accent（强调色）**：
  - `bg-accent` / `text-accent-foreground`

- **Muted（静默色）**：
  - `bg-muted` / `text-muted-foreground` - 用于辅助信息

- **Border（边框色）**：
  - `border-border` - 通用边框
  - `border-input` - 输入框边框

- **背景和前景**：
  - `bg-background` / `text-foreground`

### 2. 圆角系统

基于 `--radius` 变量（默认 0.5rem）：

- `rounded-sm` - calc(var(--radius) - 4px)
- `rounded-md` - calc(var(--radius) - 2px)
- `rounded-lg` - var(--radius)

### 3. 间距系统

使用 Tailwind 标准间距：`p-1`, `p-2`, `p-3`, `p-4`, `p-6`, `p-8` 等

## 三、组件代码模式

### 1. 使用 CVA（class-variance-authority）管理变体

创建新组件时必须遵循此模式：

```typescript
import { cva, type VariantProps } from 'class-variance-authority';
import * as React from 'react';
import { cn } from '@workspace/ui/lib/utils';

const componentVariants = cva(
  // 基础样式类（所有变体共享）
  'inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50',
  {
    variants: {
      variant: {
        default: 'bg-primary text-primary-btn hover:bg-primary/90',
        outline: 'border border-input bg-background hover:bg-accent',
        // ... 其他变体
      },
      size: {
        default: 'h-10 px-4 py-2',
        sm: 'h-8 px-3',
        lg: 'h-12 px-8',
        // ... 其他尺寸
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  }
);

export interface ComponentProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof componentVariants> {}

const Component = React.forwardRef<HTMLDivElement, ComponentProps>(
  ({ className, variant, size, ...props }, ref) => {
    return (
      <div
        ref={ref}
        className={cn(componentVariants({ variant, size }), className)}
        {...props}
      />
    );
  }
);
Component.displayName = 'Component';

export { Component, componentVariants };
```

### 2. 使用 cn() 合并类名

```typescript
import { cn } from '@workspace/ui/lib/utils';

// ✅ 正确：使用 cn() 合并类名
className={cn('base-class', variant && 'variant-class', className)}

// ❌ 错误：直接拼接字符串
className={`base-class ${variant ? 'variant-class' : ''} ${className}`}
```

### 3. 使用 forwardRef

所有可接受 ref 的组件都应使用 `React.forwardRef`：

```typescript
const Component = React.forwardRef<HTMLDivElement, ComponentProps>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn('...', className)} {...props} />
  )
);
Component.displayName = 'Component';
```

## 四、样式优先级规范

### 优先级顺序

1. **@workspace/ui 组件**（最高优先级）- 优先使用 UI 组件库中的组件
2. **Tailwind CSS** - 布局、间距、响应式类
3. **emotion/style** - 仅在不适用上述方案时使用

### 禁止使用

- ❌ SCSS（严格禁止）
- ❌ CSS Modules（除非历史遗留）
- ❌ 内联样式（除非是动态样式）
- ❌ `var(--xxx, #color)` 写法，直接写色值

## 五、响应式设计规范

### 移动端（/mobile 路径下）

```typescript
// ✅ 移动端优先：直接写移动端样式
<div className="flex flex-col gap-4 p-4">
  <Button size="lg" className="w-full">提交</Button>
</div>

// ❌ 错误：不要在移动端使用 hover
<Button className="hover:bg-primary/90">按钮</Button>
```

### 桌面端（/desktop 路径下）

```typescript
// ✅ 桌面端：可以使用 hover
<Button className="hover:bg-primary/90">按钮</Button>

// ✅ 响应式断点
<div className="flex flex-col md:flex-row gap-4">
  <div className="w-full md:w-1/2">内容</div>
</div>
```

## 六、常见场景代码模板

### 1. 表单场景

```typescript
import { Button } from '@workspace/ui/components/button';
import { Input } from '@workspace/ui/components/input';
import { Label } from '@workspace/ui/components/label';
import { Textarea } from '@workspace/ui/components/textarea';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@workspace/ui/components/select';
import { cn } from '@workspace/ui/lib/utils';

export function FormExample() {
  return (
    <form className="space-y-4">
      <div className="space-y-2">
        <Label htmlFor="name">姓名</Label>
        <Input id="name" variantSize="default" placeholder="请输入姓名" />
      </div>

      <div className="space-y-2">
        <Label htmlFor="email">邮箱</Label>
        <Input id="email" type="email" variantSize="default" placeholder="请输入邮箱" />
      </div>

      <div className="space-y-2">
        <Label htmlFor="message">消息</Label>
        <Textarea id="message" placeholder="请输入消息" />
      </div>

      <div className="flex gap-2">
        <Button type="submit" variant="default" size="default">提交</Button>
        <Button type="button" variant="outline" size="default">取消</Button>
      </div>
    </form>
  );
}
```

### 2. 卡片列表场景

```typescript
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@workspace/ui/components/card';
import { Button } from '@workspace/ui/components/button';
import { Badge } from '@workspace/ui/components/badge';
import { Edit, Trash2 } from 'lucide-react';

export function CardListExample() {
  const items = [
    { id: '1', title: '项目 1', description: '描述信息', status: 'active' },
    { id: '2', title: '项目 2', description: '描述信息', status: 'pending' },
  ];

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {items.map((item) => (
        <Card key={item.id}>
          <CardHeader>
            <div className="flex items-start justify-between">
              <CardTitle>{item.title}</CardTitle>
              <Badge variant={item.status === 'active' ? 'success' : 'warning'}>
                {item.status}
              </Badge>
            </div>
            <CardDescription>{item.description}</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="flex gap-2">
              <Button variant="outline" size="sm">
                <Edit className="h-4 w-4 mr-2" />
                编辑
              </Button>
              <Button variant="destructive" size="sm">
                <Trash2 className="h-4 w-4 mr-2" />
                删除
              </Button>
            </div>
          </CardContent>
        </Card>
      ))}
    </div>
  );
}
```

### 3. 弹窗场景（ResponsiveDialog）

> **重要**：统一使用 `ResponsiveDialog`，不要使用 `Dialog`。该组件会自动在移动端使用 Drawer，桌面端使用 Dialog。

```typescript
import { ResponsiveDialog } from '@workspace/ui/components/responsive-dialog';
import { Button } from '@workspace/ui/components/button';
import { Input } from '@workspace/ui/components/input';
import { useState } from 'react';

export function DialogExample() {
  const [open, setOpen] = useState(false);

  return (
    <>
      <Button onClick={() => setOpen(true)}>打开弹窗</Button>
      <ResponsiveDialog
        isOpen={open}
        onOpenChange={setOpen}
        title="标题"
        description="描述信息"
        showCloseIcon={true}
      >
        <div className="space-y-4 py-4">
          <Input variantSize="default" placeholder="请输入..." />
        </div>
        <div className="flex gap-2 justify-end">
          <Button variant="outline" onClick={() => setOpen(false)}>取消</Button>
          <Button variant="default" onClick={() => setOpen(false)}>确认</Button>
        </div>
      </ResponsiveDialog>
    </>
  );
}
```

**常用属性：** `isOpen`, `onOpenChange`, `title`, `description`, `showCloseIcon`（默认 true）, `fullHeight`, `dismissible`（默认 true）, `disableBackNavigation`, `handleOnly`, `showHandler`, `direction`

### 4. 表格场景

```typescript
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@workspace/ui/components/table';
import { Button } from '@workspace/ui/components/button';
import { Badge } from '@workspace/ui/components/badge';
import { Edit, Trash2 } from 'lucide-react';

export function TableExample() {
  const data = [
    { id: '1', name: '张三', email: 'zhangsan@example.com', status: 'active' },
    { id: '2', name: '李四', email: 'lisi@example.com', status: 'pending' },
  ];

  return (
    <div className="rounded-md border">
      <Table>
        <TableHeader>
          <TableRow>
            <TableHead>姓名</TableHead>
            <TableHead>邮箱</TableHead>
            <TableHead>状态</TableHead>
            <TableHead className="text-right">操作</TableHead>
          </TableRow>
        </TableHeader>
        <TableBody>
          {data.map((row) => (
            <TableRow key={row.id}>
              <TableCell className="font-medium">{row.name}</TableCell>
              <TableCell>{row.email}</TableCell>
              <TableCell>
                <Badge variant={row.status === 'active' ? 'success' : 'warning'}>
                  {row.status}
                </Badge>
              </TableCell>
              <TableCell className="text-right">
                <div className="flex justify-end gap-2">
                  <Button variant="ghost" size="icon">
                    <Edit className="h-4 w-4" />
                  </Button>
                  <Button variant="ghost" size="icon">
                    <Trash2 className="h-4 w-4" />
                  </Button>
                </div>
              </TableCell>
            </TableRow>
          ))}
        </TableBody>
      </Table>
    </div>
  );
}
```

### 5. Switch 开关场景

```typescript
import { Switch } from '@workspace/ui/components/switch';
import { Label } from '@workspace/ui/components/label';
import { useState } from 'react';

export function SwitchExample() {
  const [enabled, setEnabled] = useState(false);

  return (
    <div className="flex items-center space-x-2">
      <Switch
        checked={enabled}
        onCheckedChange={setEnabled}
      />
      <Label htmlFor="airplane-mode">启用</Label>
    </div>
  );
}
```

### 6. 分页场景（DataPagination）

> **重要**：统一使用 `DataPagination` 组件，不要使用其他分页组件或自定义分页实现。

```typescript
import { DataPagination } from '@/components/DataPagination';
import { useState } from 'react';

export function PaginationExample() {
  const [page, setPage] = useState(1);
  const pageSize = 10;
  const total = 100; // 总记录数

  return (
    <div>
      {/* 数据列表 */}
      <div className="space-y-4">
        {/* 渲染数据项 */}
      </div>

      {/* 分页组件 */}
      <DataPagination
        page={page}
        total={total}
        pageSize={pageSize}
        onPageChange={setPage}
        showInfo={true} // 显示"共X条记录，第X页"信息（默认 true）
        sticky={false} // 是否固定在底部（默认 false）
      />
    </div>
  );
}
```

**常用属性：**
- `page` - 当前页码（从1开始，必填）
- `total` - 总记录数（必填）
- `pageSize` - 每页大小（必填）
- `onPageChange` - 页码变化回调函数（必填）
- `showInfo` - 是否显示信息（共X条记录，第X页），默认 `true`
- `sticky` - 是否固定在底部，默认 `false`
- `className` - 自定义样式类名

## 七、重要规则提醒

以下规则已在上述章节详细说明，此处仅作快速参考：

- ✅ **弹窗组件**：统一使用 `ResponsiveDialog`，不要使用 `Dialog`（详见：一、1 和 六、3）
- ✅ **分页组件**：统一使用 `DataPagination`，不要使用其他分页组件或自定义分页实现（详见：一、1 和 六、6）
- ✅ **图标**：使用 `lucide-react`，不要使用 `@workspace/ui/components/Icon`（详见：一、2）
- ✅ **颜色**：使用设计 Token（如 `bg-primary`），避免直接写色值（详见：二、1）
- ✅ **样式优先级**：`@workspace/ui` > `Tailwind CSS` > `emotion/style`（详见：四）
- ✅ **禁止 SCSS**：严格禁止使用 SCSS（详见：四）
- ✅ **移动端禁止 hover**：在 `/mobile` 路径下不要使用 hover 样式（详见：五）
- ✅ **桌面端支持 hover**：在 `/desktop` 路径下可以使用 hover 样式（详见：五）
- ✅ **工具函数**：使用 `cn()` 合并类名，从 `@workspace/ui/lib/utils` 导入（详见：三、2）
- ✅ **组件变体**：使用 `cva` 管理组件变体（详见：三、1）
- ✅ **forwardRef**：所有接受 ref 的组件都应使用 `React.forwardRef`（详见：三、3）
- ⚠️ **不要使用 Next.js Image 组件**：项目中不使用 Next.js 的 Image 组件
- ✅ **避免 var(--xxx, #color) 写法**：直接写色值（详见：四）

## 八、可用组件清单

所有组件从 `@workspace/ui/components/*` 导入，详细用法请参考代码示例（详见：六）。

**常用组件：** `Button`, `Input`, `Textarea`, `Label`, `Badge`, `Card`, `Select`, `Switch`, `Table`, `ResponsiveDialog`

**简帖项目特定组件：** `DataPagination`（分页组件，从 `@/components/DataPagination` 或 `@jiantie/components/DataPagination` 导入）

完整组件列表请查看：`packages/ui/src/components/`

---

**注意**：当生成新的 UI 组件时，必须遵循上述设计系统规范，确保代码风格和设计一致性。
