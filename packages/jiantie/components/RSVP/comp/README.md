# 宾客与公开链接的规则

## 改动

1、移除visitorId、deadline，减少不确定性

## 如果是公开链接

> 没有带rsvp相关参数，以及viewed=true（由宾客转发）

1. 访客
   1. 如果是第一次打开该rsvp，则认为是该rsvp的访客，需要区分不同的rsvp，这时候记录一条访问记录
   2. 如果不是第一次打开该rsvp，则查询提交记录并显示
   3. 访客必须先填写姓名，然后才可以选择是否出席 & 填写表单，并记录操作记录
   4. 填写完成后自动录入成为该rsvp下的宾客（无需填写手机号，无论是否出席）

## 如果是邀请链接

> 带有rsvp相关参数，以及没有viewed

1. 宾客
   1. 记录一条宾客访问记录
   2. 邀请链接区分第一次打开和转发，通过viewed=true来判断是否转发
   3. 宾客第一次打开链接后，需要加上viewed=true标记，该链接转发后其他人都需要跳转到公开链接
   4. 宾客如果已经提交过该rsvp，则后续访问该rsvp链接时加载提交数据，但是换一个rsvp又需要进行访客或宾客的判断
