# RSVP专属链接分享功能需求文档

## 介绍

为RSVP组件添加专属链接分享功能，允许用户为不同的访客生成专属的分享链接，从而营造专属感。用户可以在配置面板中管理嘉宾列表，为每个嘉宾生成专属链接，并查看已邀请嘉宾的提交记录。

## 术语表

- **RSVP**: 邀请回复功能，用于收集活动参与者的回复信息
- **Form_Config**: 表单配置，一个作品对应一个RSVP表单配置
- **Contact**: 联系人，可以是普通联系人（提交时自动创建）或受邀嘉宾（手动创建）
- **Invitee**: 受邀嘉宾，通过form_config_id关联到特定表单的联系人
- **Share_Link**: 分享链接，包含作品ID和嘉宾信息的URL参数
- **Submission**: 提交记录，访客填写RSVP表单后的记录

## 需求

### 需求 1

**用户故事:** 作为简帖用户，我希望能为RSVP创建和管理受邀嘉宾列表，以便为不同访客提供专属的邀请体验

#### 验收标准

1. WHEN 用户在RSVP配置面板中点击"分享设置"Tab，THE 系统 SHALL 显示分享设置页面
2. WHEN 用户在分享设置页面中查看"指定嘉宾分享"区域，THE 系统 SHALL 显示当前表单的所有嘉宾列表
3. WHEN 用户点击"添加嘉宾"按钮，THE 系统 SHALL 跳转到嘉宾管理页面或显示嘉宾创建表单
4. WHEN 用户在嘉宾管理页面创建嘉宾，THE 系统 SHALL 要求输入姓名，并可选择输入手机号和邮箱
5. WHEN 嘉宾创建成功，THE 系统 SHALL 为该嘉宾生成专属链接参数信息
6. WHEN 用户查看嘉宾列表，THE 系统 SHALL 显示嘉宾的姓名、手机、邮箱和状态信息

### 需求 2

**用户故事:** 作为简帖用户，我希望能为嘉宾生成专属分享链接，以便通过不同渠道分享给特定访客

#### 验收标准

1. WHEN 用户在分享设置页面选择某个嘉宾，THE 系统 SHALL 提供"分享"操作按钮
2. WHEN 用户点击"分享"按钮，THE 系统 SHALL 跳转到分享页面或显示分享选项
3. WHEN 用户在分享页面中，THE 系统 SHALL 显示该嘉宾的专属链接预览
4. WHEN 系统生成专属链接，THE 链接 SHALL 包含作品ID和嘉宾信息（姓名、手机、邮箱）作为URL参数
5. WHEN 用户选择分享方式，THE 系统 SHALL 支持微信好友、朋友圈、复制链接、二维码等方式
6. WHEN 用户复制专属链接，THE 链接格式 SHALL 为 `/viewer2/{worksId}?rsvp_invitee={name}&rsvp_phone={phone}&rsvp_email={email}`

### 需求 3

**用户故事:** 作为简帖用户，我希望能查看公开链接分享选项，以便快速分享给不特定的访客

#### 验收标准

1. WHEN 用户在分享设置页面查看"公开链接分享"区域，THE 系统 SHALL 显示作品的公开分享链接
2. WHEN 用户查看公开链接，THE 链接 SHALL 不包含嘉宾相关的URL参数
3. WHEN 用户点击"复制链接"按钮，THE 系统 SHALL 复制公开链接到剪贴板
4. WHEN 用户需要二维码，THE 系统 SHALL 提供二维码展示功能

### 需求 4

**用户故事:** 作为简帖用户，我希望能查看已邀请嘉宾的提交记录，以便跟踪邀请效果

#### 验收标准

1. WHEN 用户在分享设置页面查看"已邀请嘉宾的提交记录"区域，THE 系统 SHALL 显示所有嘉宾及其提交状态列表
2. WHEN 系统显示提交记录列表，THE 列表 SHALL 包含嘉宾姓名、提交状态（待提交/已提交/已确认/已拒绝）、提交时间
3. WHEN 用户点击某个嘉宾的提交记录，THE 系统 SHALL 显示该嘉宾的详细提交信息
4. WHEN 嘉宾尚未提交，THE 系统 SHALL 显示"待提交"状态
5. WHEN 嘉宾已提交，THE 系统 SHALL 显示提交时间和状态信息

### 需求 5

**用户故事:** 作为访客，我通过专属链接访问RSVP表单时，希望看到专属的邀请信息，以便感受到被重视

#### 验收标准

1. WHEN 访客通过包含`rsvp_invitee`参数的链接访问RSVP表单，THE 系统 SHALL 在表单中显示"诚邀 [嘉宾姓名]"的标题
2. WHEN URL参数中包含嘉宾手机号，THE 系统 SHALL 在提交时自动匹配或创建对应的联系人记录
3. WHEN 访客看到专属邀请信息，THE 系统 SHALL 提供"不是本人？"选项，允许切换为公开访客模式
4. WHEN 访客提交表单，THE 系统 SHALL 将提交记录关联到对应的联系人（如果手机号匹配）

### 需求 6

**用户故事:** 作为简帖用户，我希望能管理嘉宾信息，包括编辑和删除操作

#### 验收标准

1. WHEN 用户在嘉宾列表中点击"编辑"按钮，THE 系统 SHALL 允许修改嘉宾的姓名、手机、邮箱
2. WHEN 用户修改嘉宾信息，THE 系统 SHALL 更新数据库中的联系人记录
3. WHEN 用户删除嘉宾，THE 系统 SHALL 提示确认并执行软删除操作
4. WHEN 嘉宾被删除，THE 系统 SHALL 保留该嘉宾的历史提交记录（仅标记为删除）
5. WHEN 用户批量操作嘉宾，THE 系统 SHALL 支持批量删除功能
